@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		--bg-primary: #0f0f0f;
		--bg-secondary: #1a1a1a;
		--bg-tertiary: #242424;
		--bg-hover: #2a2a2a;
		--border: #333;
		--border-light: #444;
		--text-primary: #f5f5f5;
		--text-secondary: #a0a0a0;
		--text-muted: #666;
		--accent: #8b5cf6;
		--accent-hover: #7c3aed;
		--success: #22c55e;
		--warning: #f59e0b;
		--danger: #ef4444;
		--safe-bottom: env(safe-area-inset-bottom, 0px);
		--safe-top: env(safe-area-inset-top, 0px);
	}

	* {
		scrollbar-width: thin;
		scrollbar-color: var(--border) var(--bg-secondary);
		-webkit-tap-highlight-color: transparent;
	}

	html {
		/* Prevent pull-to-refresh on mobile */
		overscroll-behavior: none;
	}

	body {
		@apply antialiased;
		background: var(--bg-primary);
		color: var(--text-primary);
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
		padding-top: var(--safe-top);
		padding-bottom: var(--safe-bottom);
		/* Prevent text size adjustment on orientation change */
		-webkit-text-size-adjust: 100%;
	}

	::selection {
		background: var(--accent);
		color: white;
	}

	/* Prevent zoom on input focus (iOS) */
	input, select, textarea {
		font-size: 16px !important;
	}
}

@layer components {
	.btn {
		@apply px-4 py-3 rounded-xl font-medium transition-all duration-200 inline-flex items-center justify-center gap-2;
		background: var(--bg-tertiary);
		color: var(--text-primary);
		border: 1px solid var(--border);
		/* Better touch targets */
		min-height: 44px;
		touch-action: manipulation;
	}

	/* Remove hover effects on touch devices */
	@media (hover: hover) {
		.btn:hover {
			background: var(--bg-hover);
			border-color: var(--border-light);
			transform: translateY(-1px);
		}
	}

	.btn:active {
		transform: scale(0.98);
		opacity: 0.9;
	}

	.btn-primary {
		background: var(--accent);
		border-color: var(--accent);
		color: white;
	}

	@media (hover: hover) {
		.btn-primary:hover {
			background: var(--accent-hover);
			border-color: var(--accent-hover);
		}
	}

	.btn-secondary {
		background: var(--bg-tertiary);
		border-color: var(--border);
		color: var(--text-secondary);
	}

	.btn-success {
		background: var(--success);
		border-color: var(--success);
		color: white;
	}

	@media (hover: hover) {
		.btn-success:hover {
			background: #16a34a;
			border-color: #16a34a;
		}
	}

	.btn-danger {
		background: transparent;
		border-color: var(--danger);
		color: var(--danger);
	}

	@media (hover: hover) {
		.btn-danger:hover {
			background: var(--danger);
			color: white;
		}
	}

	.btn-ghost {
		background: transparent;
		border-color: transparent;
		color: var(--text-secondary);
	}

	@media (hover: hover) {
		.btn-ghost:hover {
			background: var(--bg-tertiary);
			color: var(--text-primary);
		}
	}

	.btn-sm {
		@apply px-3 py-2 text-sm rounded-lg;
		min-height: 40px;
	}

	.btn-icon {
		@apply p-3;
		min-width: 44px;
		min-height: 44px;
	}

	.badge {
		@apply px-3 py-2 rounded-lg text-xs font-medium cursor-pointer transition-all duration-200;
		background: var(--bg-tertiary);
		color: var(--text-secondary);
		border: 1px solid var(--border);
		/* Touch-friendly */
		min-height: 36px;
		display: inline-flex;
		align-items: center;
		touch-action: manipulation;
	}

	@media (hover: hover) {
		.badge:hover {
			border-color: var(--border-light);
			color: var(--text-primary);
		}
	}

	.badge:active {
		transform: scale(0.95);
	}

	.badge-active {
		background: var(--accent);
		border-color: var(--accent);
		color: white;
	}

	.card {
		@apply rounded-2xl overflow-hidden transition-all duration-300 relative;
		background: var(--bg-secondary);
		border: 1px solid var(--border);
	}

	/* Only apply hover effects on non-touch devices */
	@media (hover: hover) {
		.card:hover {
			border-color: var(--border-light);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
		}
	}

	.input {
		@apply w-full px-4 py-3 rounded-xl transition-all duration-200;
		background: var(--bg-tertiary);
		border: 1px solid var(--border);
		color: var(--text-primary);
		min-height: 48px;
	}

	.input:focus {
		outline: none;
		border-color: var(--accent);
		box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
	}

	.input::placeholder {
		color: var(--text-muted);
	}

	.textarea {
		@apply input resize-none;
		min-height: 120px;
	}

	/* Type badges colors */
	.type-film {
		background: linear-gradient(135deg, #7c3aed20, #7c3aed10);
		border-color: #7c3aed50;
		color: #a78bfa;
	}

	.type-book {
		background: linear-gradient(135deg, #3b82f620, #3b82f610);
		border-color: #3b82f650;
		color: #60a5fa;
	}

	.type-concept {
		background: linear-gradient(135deg, #f59e0b20, #f59e0b10);
		border-color: #f59e0b50;
		color: #fbbf24;
	}

	.type-music {
		background: linear-gradient(135deg, #ec489920, #ec489910);
		border-color: #ec489950;
		color: #f472b6;
	}

	.type-art {
		background: linear-gradient(135deg, #10b98120, #10b98110);
		border-color: #10b98150;
		color: #34d399;
	}

	.type-todo {
		background: linear-gradient(135deg, #ef444420, #ef444410);
		border-color: #ef444450;
		color: #f87171;
	}

	.type-other {
		background: linear-gradient(135deg, #6b728020, #6b728010);
		border-color: #6b728050;
		color: #9ca3af;
	}

	/* Stats card - responsive */
	.stat-card {
		@apply rounded-xl p-3 sm:p-5 text-center transition-all duration-300;
		background: var(--bg-secondary);
		border: 1px solid var(--border);
	}

	.stat-value {
		@apply text-2xl sm:text-3xl font-bold;
		background: linear-gradient(135deg, var(--accent), #c084fc);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	.stat-label {
		@apply text-xs sm:text-sm mt-1;
		color: var(--text-secondary);
	}

	/* Modal - mobile optimized */
	.modal-backdrop {
		@apply fixed inset-0 z-50 flex items-end sm:items-center justify-center;
		background: rgba(0, 0, 0, 0.8);
		backdrop-filter: blur(4px);
		padding: 0;
		padding-top: var(--safe-top);
	}

	@media (min-width: 640px) {
		.modal-backdrop {
			padding: 1rem;
		}
	}

	.modal {
		@apply w-full max-h-[95vh] sm:max-h-[90vh] overflow-auto;
		background: var(--bg-secondary);
		border: 1px solid var(--border);
		border-radius: 1.5rem 1.5rem 0 0;
		padding-bottom: var(--safe-bottom);
	}

	@media (min-width: 640px) {
		.modal {
			@apply max-w-2xl rounded-2xl;
			padding-bottom: 0;
		}
	}

	/* Toast/notification - mobile friendly */
	.toast {
		@apply fixed left-4 right-4 sm:left-auto sm:right-4 px-4 sm:px-6 py-3 sm:py-4 rounded-xl shadow-2xl z-50;
		background: var(--bg-tertiary);
		border: 1px solid var(--border);
		animation: slideIn 0.3s ease-out;
		bottom: calc(1rem + var(--safe-bottom));
	}

	@media (min-width: 640px) {
		.toast {
			@apply w-auto;
		}
	}

	@keyframes slideIn {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	/* Skeleton loading */
	.skeleton {
		@apply rounded-xl;
		background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-hover) 50%, var(--bg-tertiary) 75%);
		background-size: 200% 100%;
		animation: shimmer 1.5s infinite;
	}

	@keyframes shimmer {
		0% { background-position: 200% 0; }
		100% { background-position: -200% 0; }
	}

	/* Hide scrollbar on mobile for cleaner look */
	@media (max-width: 640px) {
		::-webkit-scrollbar {
			display: none;
		}

		* {
			scrollbar-width: none;
		}
	}

	/* Desktop scrollbar */
	@media (min-width: 641px) {
		::-webkit-scrollbar {
			width: 8px;
			height: 8px;
		}

		::-webkit-scrollbar-track {
			background: var(--bg-secondary);
		}

		::-webkit-scrollbar-thumb {
			background: var(--border);
			border-radius: 4px;
		}

		::-webkit-scrollbar-thumb:hover {
			background: var(--border-light);
		}
	}

	/* Pull to refresh indicator */
	.pull-indicator {
		@apply fixed top-0 left-0 right-0 flex justify-center py-4 z-40;
		transform: translateY(-100%);
		transition: transform 0.3s;
	}

	.pull-indicator.visible {
		transform: translateY(0);
	}
}

/* Animations */
@layer utilities {
	.animate-fade-in {
		animation: fadeIn 0.3s ease-out;
	}

	@keyframes fadeIn {
		from { opacity: 0; }
		to { opacity: 1; }
	}

	.animate-scale-in {
		animation: scaleIn 0.2s ease-out;
	}

	@keyframes scaleIn {
		from {
			opacity: 0;
			transform: scale(0.95);
		}
		to {
			opacity: 1;
			transform: scale(1);
		}
	}

	/* Touch feedback */
	.touch-feedback:active {
		opacity: 0.7;
		transform: scale(0.98);
	}

	/* Safe area utilities */
	.pb-safe {
		padding-bottom: var(--safe-bottom);
	}

	.pt-safe {
		padding-top: var(--safe-top);
	}
}

/* Responsive text */
@media (max-width: 640px) {
	html {
		font-size: 15px;
	}
}
